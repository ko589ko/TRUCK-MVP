<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>チャット相手選択（会社）</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body { background:#e3f2fd; font-family:'Noto Sans JP',sans-serif; padding:24px; }
    .box {
      max-width:720px; margin:auto; background:#fff; padding:25px;
      border-radius:16px; box-shadow:0 6px 18px rgba(0,0,0,0.1);
    }
    h2 { color:#1565c0; text-align:center; font-weight:700; margin-bottom:20px; }

    .driver-btn {
      width:100%; background:#eaf4ff; border:1px solid #90caf9; border-radius:10px;
      padding:14px; margin-bottom:12px; font-size:18px; font-weight:600; color:#1565c0;
      text-align:left;
    }
    .driver-btn:hover { background:#bbdefb; cursor:pointer; }

    .back-btn {
      width:100%; background:#e3f2fd; border:1px solid #1565c0;
      border-radius:8px; padding:12px; margin-top:20px; font-weight:600;
    }
  </style>
</head>

<body>
<div class="box">

  <h2>💬 チャット（相手選択）</h2>
  <div id="driverList">読み込み中...</div>

  <button class="back-btn" onclick="location.href='company_home.html'">← 戻る</button>

</div>

<script>
async function loadDrivers() {
  try {
    const res = await fetch("/api/drivers");
    const drivers = await res.json();

    document.getElementById("driverList").innerHTML = drivers.map(driver => `
      <button class="driver-btn"
        onclick="location.href='company_chat.html?driver=${encodeURIComponent(driver)}'">
        ${driver}
      </button>
    `).join("");

  } catch (err) {
    document.getElementById("driverList").innerHTML = "<p>読み込みに失敗しました。</p>";
  }
}

loadDrivers();
</script>

</body>
</html>
