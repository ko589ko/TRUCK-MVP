<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>新規ドライバー登録</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body { 
      background: #e3f2fd; 
      font-family:'Noto Sans JP',sans-serif; 
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 0;
      padding: 0;
    }

    .box { 
      width: 100%;
      max-width:600px; 
      background:#fff; 
      border-radius:14px; 
      padding:32px; 
      box-shadow:0 8px 22px rgba(0,0,0,.18); 
    }

    h3 { color:#1565c0; margin-bottom:20px; font-weight:700; text-align:center; }

    .btn-main { 
      width:100%; 
      background:#1976d2; 
      color:white; 
      font-size:18px; 
      padding:12px; 
      border:none; 
      border-radius:8px; 
      margin-top:20px; 
      font-weight:600;
    }
    .btn-main:hover { background:#0d47a1; }

    .back-btn {
      width:100%; 
      margin-top:16px; 
      padding:12px; 
      border-radius:8px; 
    }
  </style>
</head>

<body>
  <div class="box">
    <h3>➕ 新規ドライバー登録</h3>

    <label class="form-label">名前</label>
    <input id="name" type="text" class="form-control" placeholder="例：松山 太郎">

    <label class="form-label mt-3">携帯番号</label>
    <input id="phone" type="text" class="form-control" placeholder="例：090-xxxx-xxxx">

    <label class="form-label mt-3">住所</label>
    <input id="address" type="text" class="form-control" placeholder="例：北海道札幌市〜">

    <button class="btn-main" onclick="registerDriver()">登録する</button>
    <button class="btn btn-outline-secondary back-btn" onclick="location.href='company_drivers.html'">← 戻る</button>
  </div>

<script>
async function registerDriver(){
  const name = document.getElementById("name").value.trim();
  const phone = document.getElementById("phone").value.trim();
  const address = document.getElementById("address").value.trim();

  if(!name || !phone || !address){
    alert("全て入力してください。");
    return;
  }

  const res = await fetch("/api/drivers/add", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({name, phone, address})
  });

  const result = await res.json();
  if(result.error){
    alert("登録に失敗しました。");
  } else {
    alert("登録完了しました！");
    location.href = "company_drivers.html";
  }
}
</script>
</body>
</html>
